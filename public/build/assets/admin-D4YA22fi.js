const o=document.getElementById("bgInput"),a=document.getElementById("bgPreview");o.addEventListener("change",function(){if(a.innerHTML="",o.files&&o.files[0]){const n=new FileReader;n.onload=function(e){const t=document.createElement("img");t.src=e.target.result,a.appendChild(t)},n.readAsDataURL(o.files[0])}});document.getElementById("bgForm").addEventListener("submit",async function(n){n.preventDefault();const e=o.files[0];if(!e){alert("Vui lòng chọn ảnh!");return}const t=new FormData;t.append("bg",e);const i=await(await fetch("/admin/upload-bg",{method:"POST",body:t})).json();i.success?alert("Đã đổi ảnh nền thành công!"):alert("Lỗi: "+(i.error||"Không thể đổi ảnh nền"))});document.getElementById("noticeForm").addEventListener("submit",function(n){n.preventDefault();const e=document.getElementById("noticeInput").value.trim();if(!e){document.getElementById("noticeResult").textContent="Vui lòng nhập thông báo!";return}document.getElementById("noticeResult").textContent="Đã đăng thông báo: "+e,document.getElementById("noticeInput").value=""});const r=document.getElementById("maintenanceToggle"),c=document.getElementById("maintenanceStatus");r.addEventListener("change",function(){r.checked?(c.textContent="Bảo trì (người dùng không thể truy cập)",c.style.color="#e53935"):(c.textContent="Đang hoạt động",c.style.color="#388e3c")});document.addEventListener("DOMContentLoaded",function(){const n=[{id:1,user:"Nguyễn Văn A",content:"Spam tin nhắn",time:"2024-07-22 10:15"},{id:2,user:"Trần Thị B",content:"Nội dung không phù hợp",time:"2024-07-22 11:02"},{id:3,user:"Lê Văn C",content:"Báo cáo lỗi hệ thống",time:"2024-07-22 12:30"}],e=document.querySelector("#reportsTable tbody");e.innerHTML="",n.forEach(t=>{const d=document.createElement("tr");d.innerHTML=`<td>${t.id}</td><td>${t.user}</td><td>${t.content}</td><td>${t.time}</td>`,e.appendChild(d)})});
